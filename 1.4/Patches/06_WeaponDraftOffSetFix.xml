<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  <Operation Class="VFECore.PatchOperationToggableSequence">
    <enabled>True</enabled>
    <mods>
      <li>Medieval Overhaul</li>
    </mods>
    <label>Fix weapon offset for longswords:</label>
    <operations>
		<li Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[@Name="DankPyon_Base_SharpSword_Oversize"]</xpath>
			<value>
				<ThingDef Name="DankPyon_Base_SharpSword_Oversize" Abstract="True" ParentName="BaseMeleeWeapon_Sharp_Quality">
					<modExtensions>
						<li Class="VFECore.ThingDefExtension">
							<weaponDraftedDrawOffsets>
								<north>
									<drawOffset>(-0.20,0.0,0.20)</drawOffset> <!--0.30,0,0.40-->
									<angleOffset>115</angleOffset>
								</north>
								<east>
									<drawOffset>(0.30,0.00,0.20)</drawOffset> <!--0.30,0.2,0.40-->
									<angleOffset>-45</angleOffset>
								</east>
								<south>
									<drawOffset>(0.30,0.00,0.20)</drawOffset>
									<angleOffset>-45</angleOffset>
								</south>
								<west>
									<drawOffset>(-0.30,0.0,0.20)</drawOffset>
									<angleOffset>45</angleOffset>
								</west>
							</weaponDraftedDrawOffsets>
						</li>
					</modExtensions> 
					<!--equippedAngleOffset>-45</equippedAngleOffset--> 
					<techLevel>Medieval</techLevel>
				</ThingDef>
			</value>
		</li>
		
		<li Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[@Name="DankPyon_Base_Sharp_Oversize"]</xpath>
			<value>
				<ThingDef Name="DankPyon_Base_Sharp_Oversize" Abstract="True" ParentName="BaseMeleeWeapon_Sharp_Quality">
					<modExtensions>
						<li Class="VFECore.ThingDefExtension">
							<weaponDraftedDrawOffsets>
								<north>
									<drawOffset>(0.34,0,0.60)</drawOffset>
									<angleOffset>-143</angleOffset>
								</north>
								<east>
									<drawOffset>(0.1,0,0.60)</drawOffset>
									<angleOffset>-122</angleOffset>
								</east>
								<south>
									<drawOffset>(-0.34,0,0.60)</drawOffset>
									<angleOffset>-143</angleOffset>
								</south>
								<west>
									<drawOffset>(-0.1,0,0.60)</drawOffset>
									<angleOffset>122</angleOffset>
								</west>
							</weaponDraftedDrawOffsets>		
						</li>
					</modExtensions>
					<equippedAngleOffset>45</equippedAngleOffset>
					<techLevel>Medieval</techLevel>
				</ThingDef>
			</value>
		</li>
		
		<li Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="DankPyon_MeleeWeapon_NamedGreatsword"]/modExtensions</xpath>
			<value>
				<modExtensions>
					<li Class="VFECore.ThingDefExtension">
						<weaponDraftedDrawOffsets>
							<north>
								<drawOffset>(-0.20,0.0,0.20)</drawOffset> <!--0.30,0,0.40-->
								<angleOffset>115</angleOffset>
							</north>
							<east>
								<drawOffset>(0.30,0.00,0.20)</drawOffset> <!--0.30,0.2,0.40-->
								<angleOffset>-45</angleOffset>
							</east>
							<south>
								<drawOffset>(0.30,0.00,0.20)</drawOffset>
								<angleOffset>-45</angleOffset>
							</south>
							<west>
								<drawOffset>(-0.30,0.0,0.20)</drawOffset>
								<angleOffset>45</angleOffset>
							</west>
						</weaponDraftedDrawOffsets>
					</li>
				</modExtensions> 
			</value>
		</li>
		
		<li Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[defName="DankPyon_MeleeWeapon_NamedGreatsword"]/equippedAngleOffset</xpath>
		</li>
		
		<li Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="DankPyon_MeleeWeapon_NamedHalberd"]/modExtensions</xpath>
			<value>
				<modExtensions>
					<li Class="VFECore.ThingDefExtension">
						<weaponDraftedDrawOffsets>
							<north>
								<drawOffset>(0.34,0,0.60)</drawOffset>
								<angleOffset>-143</angleOffset>
							</north>
							<east>
								<drawOffset>(0.1,0,0.60)</drawOffset>
								<angleOffset>-122</angleOffset>
							</east>
							<south>
								<drawOffset>(-0.34,0,0.60)</drawOffset>
								<angleOffset>-143</angleOffset>
							</south>
							<west>
								<drawOffset>(-0.1,0,0.60)</drawOffset>
								<angleOffset>122</angleOffset>
							</west>
						</weaponDraftedDrawOffsets>		
					</li>
				</modExtensions>
			</value>
		</li>
		
		<li Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="DankPyon_MeleeWeapon_NamedHalberd"]/equippedAngleOffset</xpath>
			<value>
				<equippedAngleOffset>45</equippedAngleOffset>
			</value>
		</li>
	</operations>
  </Operation>
</Patch>